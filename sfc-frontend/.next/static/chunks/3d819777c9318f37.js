(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,70756,e=>{"use strict";let t=(0,e.i(75254).default)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);e.s(["Lock",()=>t],70756)},9165,17595,e=>{"use strict";function t(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)e[a]=r[a]}return e}e.i(47167);var r=function e(r,a){function s(e,s,n){if("undefined"!=typeof document){"number"==typeof(n=t({},a,n)).expires&&(n.expires=new Date(Date.now()+864e5*n.expires)),n.expires&&(n.expires=n.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var o="";for(var i in n)n[i]&&(o+="; "+i,!0!==n[i]&&(o+="="+n[i].split(";")[0]));return document.cookie=e+"="+r.write(s,e)+o}}return Object.create({set:s,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var t=document.cookie?document.cookie.split("; "):[],a={},s=0;s<t.length;s++){var n=t[s].split("="),o=n.slice(1).join("=");try{var i=decodeURIComponent(n[0]);if(a[i]=r.read(o,i),e===i)break}catch(e){}}return e?a[e]:a}},remove:function(e,r){s(e,"",t({},r,{expires:-1}))},withAttributes:function(r){return e(this.converter,t({},this.attributes,r))},withConverter:function(r){return e(t({},this.converter,r),this.attributes)}},{attributes:{value:Object.freeze(a)},converter:{value:Object.freeze(r)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});async function a(e,t={}){let{token:s,...n}=t,o={"Content-Type":"application/json"};t.headers&&Object.assign(o,t.headers);let i=s||r.get("access_token");i&&(o.Authorization=`Bearer ${i}`);try{let t=await fetch(`http://localhost:8000/api/v1${e}`,{...n,headers:o}),r=await t.json().catch(()=>null);if(!t.ok){let e=r?.detail?.message||r?.detail||r?.message||"An error occurred",t=r?.detail?.code||r?.code;return{error:{message:e,code:t}}}return{data:r}}catch(e){return console.error("API request failed:",e),{error:{message:"Network error. Please check your connection."}}}}e.s(["default",()=>r],17595);let s=(e,t)=>a(e,{...t,method:"GET"}),n=(e,t,r)=>a(e,{...r,method:"POST",body:JSON.stringify(t)}),o=(e,t,r)=>a(e,{...r,method:"PUT",body:JSON.stringify(t)}),i=(e,t)=>a(e,{...t,method:"DELETE"});e.s(["adminApi",0,{listPrograms:e=>{let t=new URLSearchParams;e?.include_unpublished!==void 0&&t.append("include_unpublished",e.include_unpublished.toString()),e?.limit&&t.append("limit",e.limit.toString()),e?.offset&&t.append("offset",e.offset.toString());let r=t.toString();return s(`/admin/programs${r?`?${r}`:""}`)},createProgram:e=>n("/admin/programs",e),getProgram:e=>s(`/admin/programs/${e}`),updateProgram:(e,t)=>o(`/admin/programs/${e}`,t),deleteProgram:e=>i(`/admin/programs/${e}`),publishProgram:e=>n(`/admin/programs/${e}/publish`),unpublishProgram:e=>n(`/admin/programs/${e}/unpublish`),addWorkout:(e,t)=>n(`/admin/programs/${e}/workouts`,t),updateWorkout:(e,t)=>o(`/admin/workouts/${e}`,t),deleteWorkout:e=>i(`/admin/workouts/${e}`),getWorkout:e=>s(`/admin/workouts/${e}`)},"authApi",0,{signup:e=>n("/auth/signup",e),verifyOtp:e=>n("/auth/verify-otp",e),resendOtp:e=>n("/auth/resend-otp",e),signin:e=>n("/auth/signin",e),refresh:e=>n("/auth/refresh",e),logout:e=>n("/auth/logout",e),forgotPassword:e=>n("/auth/forgot-password",e),resetPassword:e=>n("/auth/reset-password",e),changePassword:e=>n("/auth/change-password",e),getMe:()=>s("/auth/me"),getStatus:()=>s("/auth/status")},"programsApi",0,{list:e=>{let t=new URLSearchParams;e?.goal&&t.append("goal",e.goal),e?.difficulty&&t.append("difficulty",e.difficulty),e?.featured&&t.append("featured","true"),e?.limit&&t.append("limit",e.limit.toString()),e?.offset&&t.append("offset",e.offset.toString());let r=t.toString();return s(`/programs${r?`?${r}`:""}`)},getFeatured:(e=6)=>s(`/programs/featured?limit=${e}`),getRecommended:(e=6)=>s(`/programs/recommended?limit=${e}`),getContinue:()=>s("/programs/continue"),getById:e=>s(`/programs/${e}`),enroll:e=>n(`/programs/${e}/enroll`),unenroll:e=>i(`/programs/${e}/enroll`),getProgress:e=>s(`/programs/${e}/progress`),getWorkoutsWithProgress:e=>s(`/programs/${e}/workouts`),markWorkoutComplete:(e,t)=>n(`/programs/workouts/${e}/complete`,t||{})},"userApi",0,{completeOnboarding:e=>n("/users/onboarding",e),getProfile:()=>s("/users/profile"),updateProfile:e=>o("/users/profile",e)}],9165)},18566,(e,t,r)=>{t.exports=e.r(76562)},35960,e=>{"use strict";let t,r,a;var s=e.i(71645);let n=e=>{let t,r=new Set,a=(e,a)=>{let s="function"==typeof e?e(t):e;if(!Object.is(s,t)){let e=t;t=(null!=a?a:"object"!=typeof s||null===s)?s:Object.assign({},t,s),r.forEach(r=>r(t,e))}},s=()=>t,n={setState:a,getState:s,getInitialState:()=>o,subscribe:e=>(r.add(e),()=>r.delete(e))},o=t=e(a,s,n);return n},o=e=>{let t=e?n(e):n,r=e=>(function(e,t=e=>e){let r=s.default.useSyncExternalStore(e.subscribe,s.default.useCallback(()=>t(e.getState()),[e,t]),s.default.useCallback(()=>t(e.getInitialState()),[e,t]));return s.default.useDebugValue(r),r})(t,e);return Object.assign(r,t),r},i=e=>t=>{try{let r=e(t);if(r instanceof Promise)return r;return{then:e=>i(e)(r),catch(e){return this}}}catch(e){return{then(e){return this},catch:t=>i(t)(e)}}};var u=e.i(17595),l=e.i(9165);let d=(t?o(t):o)((r=(e,t)=>({user:null,profile:null,isAuthenticated:!1,isLoading:!0,hasCompletedOnboarding:!1,setUser:t=>e({user:t,isAuthenticated:!!t}),setProfile:t=>e({profile:t,hasCompletedOnboarding:!!t?.onboarding_completed_at}),setLoading:t=>e({isLoading:t}),login:async(t,r,a=!1)=>{try{let{data:s,error:n}=await l.authApi.signin({email:t,password:r});if(n)return{success:!1,error:n.message};if(s){let t=a?30:1;u.default.set("access_token",s.access_token,{expires:t}),u.default.set("refresh_token",s.refresh_token,{expires:t});let r=await l.authApi.getStatus();if(r.data){if(e({user:r.data.user,isAuthenticated:!0,hasCompletedOnboarding:r.data.onboarding_completed}),r.data.onboarding_completed){let t=await l.userApi.getProfile();t.data&&e({profile:t.data})}return{success:!0,requiresOnboarding:!r.data.onboarding_completed}}}return{success:!1,error:"Login failed"}}catch{return{success:!1,error:"An unexpected error occurred"}}},signup:async(e,t,r)=>{try{let{data:a,error:s}=await l.authApi.signup({email:e,password:t,privacy_consent:r.privacy,data_processing_consent:r.dataProcessing,marketing_consent:r.marketing});if(s)return{success:!1,error:s.message};if(a)return{success:!0,userId:a.user_id};return{success:!1,error:"Signup failed"}}catch{return{success:!1,error:"An unexpected error occurred"}}},verifyOtp:async(t,r,a=!1)=>{try{let{data:s,error:n}=await l.authApi.verifyOtp({email:t,code:r});if(n)return{success:!1,error:n.message};if(s){let t=a?30:1;u.default.set("access_token",s.access_token,{expires:t}),u.default.set("refresh_token",s.refresh_token,{expires:t});let r=await l.authApi.getStatus();if(r.data)return e({user:r.data.user,isAuthenticated:!0,hasCompletedOnboarding:r.data.onboarding_completed}),{success:!0,requiresOnboarding:!r.data.onboarding_completed}}return{success:!1,error:"Verification failed"}}catch{return{success:!1,error:"An unexpected error occurred"}}},logout:async()=>{let t=u.default.get("refresh_token");t&&await l.authApi.logout({refresh_token:t}),u.default.remove("access_token"),u.default.remove("refresh_token"),e({user:null,profile:null,isAuthenticated:!1,hasCompletedOnboarding:!1})},refreshAuth:async()=>{let e=u.default.get("refresh_token");if(!e)return!1;try{let{data:r,error:a}=await l.authApi.refresh({refresh_token:e});if(a||!r)return t().logout(),!1;return u.default.set("access_token",r.access_token),u.default.set("refresh_token",r.refresh_token),!0}catch{return t().logout(),!1}},checkAuth:async()=>{if(e({isLoading:!0}),!u.default.get("access_token"))return void e({isLoading:!1});try{let{data:r,error:a}=await l.authApi.getStatus();if(a){if(await t().refreshAuth())return void await t().checkAuth();e({isLoading:!1});return}if(r&&(e({user:r.user,isAuthenticated:!0,hasCompletedOnboarding:r.onboarding_completed}),r.onboarding_completed)){let t=await l.userApi.getProfile();t.data&&e({profile:t.data})}}catch{t().logout()}finally{e({isLoading:!1})}}}),a={name:"sfc-auth",partialize:e=>({user:e.user,isAuthenticated:e.isAuthenticated,hasCompletedOnboarding:e.hasCompletedOnboarding})},(e,t,s)=>{let n,o={storage:function(e,t){let r;try{r=e()}catch(e){return}return{getItem:e=>{var t;let a=e=>null===e?null:JSON.parse(e,void 0),s=null!=(t=r.getItem(e))?t:null;return s instanceof Promise?s.then(a):a(s)},setItem:(e,t)=>r.setItem(e,JSON.stringify(t,void 0)),removeItem:e=>r.removeItem(e)}}(()=>localStorage),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...a},u=!1,l=new Set,d=new Set,c=o.storage;if(!c)return r((...t)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),e(...t)},t,s);let m=()=>{let e=o.partialize({...t()});return c.setItem(o.name,{state:e,version:o.version})},p=s.setState;s.setState=(e,t)=>(p(e,t),m());let g=r((...t)=>(e(...t),m()),t,s);s.getInitialState=()=>g;let h=()=>{var r,a;if(!c)return;u=!1,l.forEach(e=>{var r;return e(null!=(r=t())?r:g)});let s=(null==(a=o.onRehydrateStorage)?void 0:a.call(o,null!=(r=t())?r:g))||void 0;return i(c.getItem.bind(c))(o.name).then(e=>{if(e)if("number"!=typeof e.version||e.version===o.version)return[!1,e.state];else{if(o.migrate){let t=o.migrate(e.state,e.version);return t instanceof Promise?t.then(e=>[!0,e]):[!0,t]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]}).then(r=>{var a;let[s,i]=r;if(e(n=o.merge(i,null!=(a=t())?a:g),!0),s)return m()}).then(()=>{null==s||s(n,void 0),n=t(),u=!0,d.forEach(e=>e(n))}).catch(e=>{null==s||s(void 0,e)})};return s.persist={setOptions:e=>{o={...o,...e},e.storage&&(c=e.storage)},clearStorage:()=>{null==c||c.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>h(),hasHydrated:()=>u,onHydrate:e=>(l.add(e),()=>{l.delete(e)}),onFinishHydration:e=>(d.add(e),()=>{d.delete(e)})},o.skipHydration||h(),n||g}));e.s(["useAuthStore",0,d],35960)},72520,e=>{"use strict";let t=(0,e.i(75254).default)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);e.s(["ArrowRight",()=>t],72520)},63488,e=>{"use strict";let t=(0,e.i(75254).default)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);e.s(["Mail",()=>t],63488)},388,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(22016),s=e.i(18566),n=e.i(46932),o=e.i(63488),i=e.i(70756),u=e.i(72520);e.i(16787);var l=e.i(59544),d=e.i(3812),c=e.i(96359),m=e.i(39964),p=e.i(35960);function g(){let e=(0,s.useRouter)(),g=(0,s.useSearchParams)().get("redirect")||"/dashboard",{login:h}=(0,p.useAuthStore)(),[f,b]=(0,r.useState)({email:"",password:"",rememberMe:!1}),[y,v]=(0,r.useState)(""),[k,x]=(0,r.useState)(!1),w=async t=>{t.preventDefault(),v(""),x(!0);let r=await h(f.email,f.password,f.rememberMe);r.success?r.requiresOnboarding?e.push("/onboarding"):e.push(g):v(r.error||"Invalid email or password"),x(!1)};return(0,t.jsx)(n.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:(0,t.jsxs)(m.Card,{className:"p-8",children:[(0,t.jsxs)("div",{className:"text-center mb-8",children:[(0,t.jsx)("h1",{className:"text-2xl font-display font-bold text-dark-100",children:"Welcome Back"}),(0,t.jsx)("p",{className:"text-dark-400 mt-2",children:"Sign in to continue your fitness journey"})]}),(0,t.jsxs)("form",{onSubmit:w,className:"space-y-5",children:[y&&(0,t.jsx)(n.motion.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"p-4 rounded-xl bg-accent-rose/10 border border-accent-rose/20",children:(0,t.jsx)("p",{className:"text-sm text-accent-rose",children:y})}),(0,t.jsx)(d.Input,{type:"email",label:"Email",placeholder:"you@example.com",value:f.email,onChange:e=>b({...f,email:e.target.value}),leftIcon:(0,t.jsx)(o.Mail,{className:"w-5 h-5"}),required:!0}),(0,t.jsx)(d.Input,{type:"password",label:"Password",placeholder:"Enter your password",value:f.password,onChange:e=>b({...f,password:e.target.value}),leftIcon:(0,t.jsx)(i.Lock,{className:"w-5 h-5"}),required:!0}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(c.Checkbox,{label:"Remember me",checked:f.rememberMe,onChange:e=>b({...f,rememberMe:e.target.checked})}),(0,t.jsx)(a.default,{href:"/forgot-password",className:"text-sm text-primary-400 hover:text-primary-300 transition-colors",children:"Forgot password?"})]}),(0,t.jsx)(l.Button,{type:"submit",className:"w-full",size:"lg",isLoading:k,rightIcon:(0,t.jsx)(u.ArrowRight,{className:"w-5 h-5"}),children:"Sign In"})]}),(0,t.jsxs)("p",{className:"text-center mt-6 text-dark-400",children:["Don't have an account?"," ",(0,t.jsx)(a.default,{href:"/signup",className:"text-primary-400 hover:text-primary-300 font-medium transition-colors",children:"Sign up"})]})]})})}function h(){return(0,t.jsx)(r.Suspense,{fallback:(0,t.jsxs)(m.Card,{className:"p-8 animate-pulse",children:[(0,t.jsx)("div",{className:"h-8 bg-dark-700 rounded w-1/2 mx-auto mb-4"}),(0,t.jsx)("div",{className:"h-4 bg-dark-700 rounded w-3/4 mx-auto mb-8"}),(0,t.jsxs)("div",{className:"space-y-5",children:[(0,t.jsx)("div",{className:"h-12 bg-dark-700 rounded"}),(0,t.jsx)("div",{className:"h-12 bg-dark-700 rounded"}),(0,t.jsx)("div",{className:"h-12 bg-dark-700 rounded"})]})]}),children:(0,t.jsx)(g,{})})}e.s(["default",()=>h])}]);