(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,69638,e=>{"use strict";let t=(0,e.i(75254).default)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>t],69638)},9165,17595,e=>{"use strict";function t(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)e[a]=r[a]}return e}e.i(47167);var r=function e(r,a){function s(e,s,i){if("undefined"!=typeof document){"number"==typeof(i=t({},a,i)).expires&&(i.expires=new Date(Date.now()+864e5*i.expires)),i.expires&&(i.expires=i.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var n="";for(var o in i)i[o]&&(n+="; "+o,!0!==i[o]&&(n+="="+i[o].split(";")[0]));return document.cookie=e+"="+r.write(s,e)+n}}return Object.create({set:s,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var t=document.cookie?document.cookie.split("; "):[],a={},s=0;s<t.length;s++){var i=t[s].split("="),n=i.slice(1).join("=");try{var o=decodeURIComponent(i[0]);if(a[o]=r.read(n,o),e===o)break}catch(e){}}return e?a[e]:a}},remove:function(e,r){s(e,"",t({},r,{expires:-1}))},withAttributes:function(r){return e(this.converter,t({},this.attributes,r))},withConverter:function(r){return e(t({},this.converter,r),this.attributes)}},{attributes:{value:Object.freeze(a)},converter:{value:Object.freeze(r)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});async function a(e,t={}){let{token:s,...i}=t,n={"Content-Type":"application/json"};t.headers&&Object.assign(n,t.headers);let o=s||r.get("access_token");o&&(n.Authorization=`Bearer ${o}`);try{let t=await fetch(`http://localhost:8000/api/v1${e}`,{...i,headers:n}),r=await t.json().catch(()=>null);if(!t.ok){let e=r?.detail?.message||r?.detail||r?.message||"An error occurred",t=r?.detail?.code||r?.code;return{error:{message:e,code:t}}}return{data:r}}catch(e){return console.error("API request failed:",e),{error:{message:"Network error. Please check your connection."}}}}e.s(["default",()=>r],17595);let s=(e,t)=>a(e,{...t,method:"GET"}),i=(e,t,r)=>a(e,{...r,method:"POST",body:JSON.stringify(t)}),n=(e,t,r)=>a(e,{...r,method:"PUT",body:JSON.stringify(t)}),o=(e,t)=>a(e,{...t,method:"DELETE"});e.s(["adminApi",0,{listPrograms:e=>{let t=new URLSearchParams;e?.include_unpublished!==void 0&&t.append("include_unpublished",e.include_unpublished.toString()),e?.limit&&t.append("limit",e.limit.toString()),e?.offset&&t.append("offset",e.offset.toString());let r=t.toString();return s(`/admin/programs${r?`?${r}`:""}`)},createProgram:e=>i("/admin/programs",e),getProgram:e=>s(`/admin/programs/${e}`),updateProgram:(e,t)=>n(`/admin/programs/${e}`,t),deleteProgram:e=>o(`/admin/programs/${e}`),publishProgram:e=>i(`/admin/programs/${e}/publish`),unpublishProgram:e=>i(`/admin/programs/${e}/unpublish`),addWorkout:(e,t)=>i(`/admin/programs/${e}/workouts`,t),updateWorkout:(e,t)=>n(`/admin/workouts/${e}`,t),deleteWorkout:e=>o(`/admin/workouts/${e}`),getWorkout:e=>s(`/admin/workouts/${e}`)},"authApi",0,{signup:e=>i("/auth/signup",e),verifyOtp:e=>i("/auth/verify-otp",e),resendOtp:e=>i("/auth/resend-otp",e),signin:e=>i("/auth/signin",e),refresh:e=>i("/auth/refresh",e),logout:e=>i("/auth/logout",e),forgotPassword:e=>i("/auth/forgot-password",e),resetPassword:e=>i("/auth/reset-password",e),changePassword:e=>i("/auth/change-password",e),getMe:()=>s("/auth/me"),getStatus:()=>s("/auth/status")},"programsApi",0,{list:e=>{let t=new URLSearchParams;e?.goal&&t.append("goal",e.goal),e?.difficulty&&t.append("difficulty",e.difficulty),e?.featured&&t.append("featured","true"),e?.limit&&t.append("limit",e.limit.toString()),e?.offset&&t.append("offset",e.offset.toString());let r=t.toString();return s(`/programs${r?`?${r}`:""}`)},getFeatured:(e=6)=>s(`/programs/featured?limit=${e}`),getRecommended:(e=6)=>s(`/programs/recommended?limit=${e}`),getContinue:()=>s("/programs/continue"),getById:e=>s(`/programs/${e}`),enroll:e=>i(`/programs/${e}/enroll`),unenroll:e=>o(`/programs/${e}/enroll`),getProgress:e=>s(`/programs/${e}/progress`),getWorkoutsWithProgress:e=>s(`/programs/${e}/workouts`),markWorkoutComplete:(e,t)=>i(`/programs/workouts/${e}/complete`,t||{})},"userApi",0,{completeOnboarding:e=>i("/users/onboarding",e),getProfile:()=>s("/users/profile"),updateProfile:e=>n("/users/profile",e)}],9165)},18566,(e,t,r)=>{t.exports=e.r(76562)},35960,e=>{"use strict";let t,r,a;var s=e.i(71645);let i=e=>{let t,r=new Set,a=(e,a)=>{let s="function"==typeof e?e(t):e;if(!Object.is(s,t)){let e=t;t=(null!=a?a:"object"!=typeof s||null===s)?s:Object.assign({},t,s),r.forEach(r=>r(t,e))}},s=()=>t,i={setState:a,getState:s,getInitialState:()=>n,subscribe:e=>(r.add(e),()=>r.delete(e))},n=t=e(a,s,i);return i},n=e=>{let t=e?i(e):i,r=e=>(function(e,t=e=>e){let r=s.default.useSyncExternalStore(e.subscribe,s.default.useCallback(()=>t(e.getState()),[e,t]),s.default.useCallback(()=>t(e.getInitialState()),[e,t]));return s.default.useDebugValue(r),r})(t,e);return Object.assign(r,t),r},o=e=>t=>{try{let r=e(t);if(r instanceof Promise)return r;return{then:e=>o(e)(r),catch(e){return this}}}catch(e){return{then(e){return this},catch:t=>o(t)(e)}}};var l=e.i(17595),u=e.i(9165);let c=(t?n(t):n)((r=(e,t)=>({user:null,profile:null,isAuthenticated:!1,isLoading:!0,hasCompletedOnboarding:!1,setUser:t=>e({user:t,isAuthenticated:!!t}),setProfile:t=>e({profile:t,hasCompletedOnboarding:!!t?.onboarding_completed_at}),setLoading:t=>e({isLoading:t}),login:async(t,r,a=!1)=>{try{let{data:s,error:i}=await u.authApi.signin({email:t,password:r});if(i)return{success:!1,error:i.message};if(s){let t=a?30:1;l.default.set("access_token",s.access_token,{expires:t}),l.default.set("refresh_token",s.refresh_token,{expires:t});let r=await u.authApi.getStatus();if(r.data){if(e({user:r.data.user,isAuthenticated:!0,hasCompletedOnboarding:r.data.onboarding_completed}),r.data.onboarding_completed){let t=await u.userApi.getProfile();t.data&&e({profile:t.data})}return{success:!0,requiresOnboarding:!r.data.onboarding_completed}}}return{success:!1,error:"Login failed"}}catch{return{success:!1,error:"An unexpected error occurred"}}},signup:async(e,t,r)=>{try{let{data:a,error:s}=await u.authApi.signup({email:e,password:t,privacy_consent:r.privacy,data_processing_consent:r.dataProcessing,marketing_consent:r.marketing});if(s)return{success:!1,error:s.message};if(a)return{success:!0,userId:a.user_id};return{success:!1,error:"Signup failed"}}catch{return{success:!1,error:"An unexpected error occurred"}}},verifyOtp:async(t,r,a=!1)=>{try{let{data:s,error:i}=await u.authApi.verifyOtp({email:t,code:r});if(i)return{success:!1,error:i.message};if(s){let t=a?30:1;l.default.set("access_token",s.access_token,{expires:t}),l.default.set("refresh_token",s.refresh_token,{expires:t});let r=await u.authApi.getStatus();if(r.data)return e({user:r.data.user,isAuthenticated:!0,hasCompletedOnboarding:r.data.onboarding_completed}),{success:!0,requiresOnboarding:!r.data.onboarding_completed}}return{success:!1,error:"Verification failed"}}catch{return{success:!1,error:"An unexpected error occurred"}}},logout:async()=>{let t=l.default.get("refresh_token");t&&await u.authApi.logout({refresh_token:t}),l.default.remove("access_token"),l.default.remove("refresh_token"),e({user:null,profile:null,isAuthenticated:!1,hasCompletedOnboarding:!1})},refreshAuth:async()=>{let e=l.default.get("refresh_token");if(!e)return!1;try{let{data:r,error:a}=await u.authApi.refresh({refresh_token:e});if(a||!r)return t().logout(),!1;return l.default.set("access_token",r.access_token),l.default.set("refresh_token",r.refresh_token),!0}catch{return t().logout(),!1}},checkAuth:async()=>{if(e({isLoading:!0}),!l.default.get("access_token"))return void e({isLoading:!1});try{let{data:r,error:a}=await u.authApi.getStatus();if(a){if(await t().refreshAuth())return void await t().checkAuth();e({isLoading:!1});return}if(r&&(e({user:r.user,isAuthenticated:!0,hasCompletedOnboarding:r.onboarding_completed}),r.onboarding_completed)){let t=await u.userApi.getProfile();t.data&&e({profile:t.data})}}catch{t().logout()}finally{e({isLoading:!1})}}}),a={name:"sfc-auth",partialize:e=>({user:e.user,isAuthenticated:e.isAuthenticated,hasCompletedOnboarding:e.hasCompletedOnboarding})},(e,t,s)=>{let i,n={storage:function(e,t){let r;try{r=e()}catch(e){return}return{getItem:e=>{var t;let a=e=>null===e?null:JSON.parse(e,void 0),s=null!=(t=r.getItem(e))?t:null;return s instanceof Promise?s.then(a):a(s)},setItem:(e,t)=>r.setItem(e,JSON.stringify(t,void 0)),removeItem:e=>r.removeItem(e)}}(()=>localStorage),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...a},l=!1,u=new Set,c=new Set,d=n.storage;if(!d)return r((...t)=>{console.warn(`[zustand persist middleware] Unable to update item '${n.name}', the given storage is currently unavailable.`),e(...t)},t,s);let m=()=>{let e=n.partialize({...t()});return d.setItem(n.name,{state:e,version:n.version})},p=s.setState;s.setState=(e,t)=>(p(e,t),m());let h=r((...t)=>(e(...t),m()),t,s);s.getInitialState=()=>h;let g=()=>{var r,a;if(!d)return;l=!1,u.forEach(e=>{var r;return e(null!=(r=t())?r:h)});let s=(null==(a=n.onRehydrateStorage)?void 0:a.call(n,null!=(r=t())?r:h))||void 0;return o(d.getItem.bind(d))(n.name).then(e=>{if(e)if("number"!=typeof e.version||e.version===n.version)return[!1,e.state];else{if(n.migrate){let t=n.migrate(e.state,e.version);return t instanceof Promise?t.then(e=>[!0,e]):[!0,t]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]}).then(r=>{var a;let[s,o]=r;if(e(i=n.merge(o,null!=(a=t())?a:h),!0),s)return m()}).then(()=>{null==s||s(i,void 0),i=t(),l=!0,c.forEach(e=>e(i))}).catch(e=>{null==s||s(void 0,e)})};return s.persist={setOptions:e=>{n={...n,...e},e.storage&&(d=e.storage)},clearStorage:()=>{null==d||d.removeItem(n.name)},getOptions:()=>n,rehydrate:()=>g(),hasHydrated:()=>l,onHydrate:e=>(u.add(e),()=>{u.delete(e)}),onFinishHydration:e=>(c.add(e),()=>{c.delete(e)})},n.skipHydration||g(),i||h}));e.s(["useAuthStore",0,c],35960)},72520,e=>{"use strict";let t=(0,e.i(75254).default)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);e.s(["ArrowRight",()=>t],72520)},63488,e=>{"use strict";let t=(0,e.i(75254).default)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);e.s(["Mail",()=>t],63488)},36365,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(18566),s=e.i(46932),i=e.i(72520);let n=(0,e.i(75254).default)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);var o=e.i(63488),l=e.i(69638);e.i(16787);var u=e.i(59544),c=e.i(39964),d=e.i(96359),m=e.i(35960),p=e.i(9165);function h(){let e=(0,a.useRouter)(),h=(0,a.useSearchParams)().get("email")||"",{verifyOtp:g}=(0,m.useAuthStore)(),[f,y]=(0,r.useState)(["","","","","",""]),[b,v]=(0,r.useState)(!1),[x,k]=(0,r.useState)(""),[w,S]=(0,r.useState)(!1),[j,A]=(0,r.useState)(!1),[C,_]=(0,r.useState)(!1),[O,N]=(0,r.useState)(0),P=(0,r.useRef)([]);(0,r.useEffect)(()=>{if(O>0){let e=setTimeout(()=>N(O-1),1e3);return()=>clearTimeout(e)}},[O]);let $=async t=>{t.preventDefault();let r=f.join("");if(6!==r.length)return void k("Please enter the complete 6-digit code");S(!0),k("");let a=await g(h,r,b);a.success?a.requiresOnboarding?e.push("/onboarding"):e.push("/dashboard"):(k(a.error||"Invalid verification code"),y(["","","","","",""]),P.current[0]?.focus()),S(!1)},I=async()=>{if(O>0)return;A(!0),k(""),_(!1);let{error:e}=await p.authApi.resendOtp({email:h});e?k(e.message):(_(!0),N(60),setTimeout(()=>_(!1),5e3)),A(!1)};return(0,t.jsx)(s.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:(0,t.jsxs)(c.Card,{className:"p-8",children:[(0,t.jsxs)("div",{className:"text-center mb-8",children:[(0,t.jsx)("div",{className:"w-16 h-16 rounded-full bg-primary-500/20 flex items-center justify-center mx-auto mb-4",children:(0,t.jsx)(o.Mail,{className:"w-8 h-8 text-primary-400"})}),(0,t.jsx)("h1",{className:"text-2xl font-display font-bold text-dark-100",children:"Check Your Email"}),(0,t.jsx)("p",{className:"text-dark-400 mt-2",children:"We've sent a 6-digit verification code to"}),(0,t.jsx)("p",{className:"text-primary-400 font-medium",children:h})]}),(0,t.jsxs)("form",{onSubmit:$,className:"space-y-6",children:[x&&(0,t.jsx)(s.motion.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"p-4 rounded-xl bg-accent-rose/10 border border-accent-rose/20",children:(0,t.jsx)("p",{className:"text-sm text-accent-rose",children:x})}),C&&(0,t.jsxs)(s.motion.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"p-4 rounded-xl bg-accent-emerald/10 border border-accent-emerald/20 flex items-center gap-2",children:[(0,t.jsx)(l.CheckCircle,{className:"w-5 h-5 text-accent-emerald"}),(0,t.jsx)("p",{className:"text-sm text-accent-emerald",children:"Verification code resent successfully!"})]}),(0,t.jsx)("div",{className:"flex justify-center gap-2 sm:gap-3",children:f.map((e,r)=>(0,t.jsx)("input",{ref:e=>{P.current[r]=e},type:"text",inputMode:"numeric",maxLength:6,value:e,onChange:e=>((e,t)=>{if(t.length>1){let r=t.slice(0,6).split(""),a=[...f];r.forEach((t,r)=>{e+r<6&&(a[e+r]=t)}),y(a);let s=Math.min(e+r.length,5);P.current[s]?.focus()}else{let r=[...f];r[e]=t,y(r),t&&e<5&&P.current[e+1]?.focus()}k("")})(r,e.target.value.replace(/\D/g,"")),onKeyDown:e=>{"Backspace"===e.key&&!f[r]&&r>0&&P.current[r-1]?.focus()},className:"w-11 h-14 sm:w-12 sm:h-16 text-center text-2xl font-bold rounded-xl bg-dark-800/50 border border-dark-600 text-dark-100 focus:outline-none focus:border-primary-500 focus:ring-2 focus:ring-primary-500/20 transition-all"},r))}),(0,t.jsx)(d.Checkbox,{label:"Remember me on this device",checked:b,onChange:e=>v(e.target.checked),className:"justify-center"}),(0,t.jsx)(u.Button,{type:"submit",className:"w-full",size:"lg",isLoading:w,rightIcon:(0,t.jsx)(i.ArrowRight,{className:"w-5 h-5"}),children:"Verify Email"})]}),(0,t.jsxs)("div",{className:"mt-6 text-center",children:[(0,t.jsx)("p",{className:"text-dark-400 mb-2",children:"Didn't receive the code?"}),(0,t.jsxs)("button",{onClick:I,disabled:j||O>0,className:"inline-flex items-center gap-2 text-primary-400 hover:text-primary-300 font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,t.jsx)(n,{className:`w-4 h-4 ${j?"animate-spin":""}`}),O>0?`Resend in ${O}s`:"Resend Code"]})]})]})})}function g(){return(0,t.jsx)(r.Suspense,{fallback:(0,t.jsxs)(c.Card,{className:"p-8 animate-pulse",children:[(0,t.jsx)("div",{className:"h-16 w-16 rounded-full bg-dark-700 mx-auto mb-4"}),(0,t.jsx)("div",{className:"h-8 bg-dark-700 rounded w-3/4 mx-auto mb-2"}),(0,t.jsx)("div",{className:"h-4 bg-dark-700 rounded w-1/2 mx-auto"})]}),children:(0,t.jsx)(h,{})})}e.s(["default",()=>g],36365)}]);