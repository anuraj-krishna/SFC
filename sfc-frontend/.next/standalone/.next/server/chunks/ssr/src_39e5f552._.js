module.exports=[19032,5434,a=>{"use strict";function b(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)a[d]=c[d]}return a}var c=function a(c,d){function e(a,e,f){if("undefined"!=typeof document){"number"==typeof(f=b({},d,f)).expires&&(f.expires=new Date(Date.now()+864e5*f.expires)),f.expires&&(f.expires=f.expires.toUTCString()),a=encodeURIComponent(a).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var g="";for(var h in f)f[h]&&(g+="; "+h,!0!==f[h]&&(g+="="+f[h].split(";")[0]));return document.cookie=a+"="+c.write(e,a)+g}}return Object.create({set:e,get:function(a){if("undefined"!=typeof document&&(!arguments.length||a)){for(var b=document.cookie?document.cookie.split("; "):[],d={},e=0;e<b.length;e++){var f=b[e].split("="),g=f.slice(1).join("=");try{var h=decodeURIComponent(f[0]);if(d[h]=c.read(g,h),a===h)break}catch(a){}}return a?d[a]:d}},remove:function(a,c){e(a,"",b({},c,{expires:-1}))},withAttributes:function(c){return a(this.converter,b({},this.attributes,c))},withConverter:function(c){return a(b({},this.converter,c),this.attributes)}},{attributes:{value:Object.freeze(d)},converter:{value:Object.freeze(c)}})}({read:function(a){return'"'===a[0]&&(a=a.slice(1,-1)),a.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(a){return encodeURIComponent(a).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});async function d(a,b={}){let{token:e,...f}=b,g={"Content-Type":"application/json"};b.headers&&Object.assign(g,b.headers);let h=e||c.get("access_token");h&&(g.Authorization=`Bearer ${h}`);try{let b=await fetch(`http://localhost:8000/api/v1${a}`,{...f,headers:g}),c=await b.json().catch(()=>null);if(!b.ok){let a=c?.detail?.message||c?.detail||c?.message||"An error occurred",b=c?.detail?.code||c?.code;return{error:{message:a,code:b}}}return{data:c}}catch(a){return console.error("API request failed:",a),{error:{message:"Network error. Please check your connection."}}}}a.s(["default",()=>c],5434);let e=(a,b)=>d(a,{...b,method:"GET"}),f=(a,b,c)=>d(a,{...c,method:"POST",body:JSON.stringify(b)}),g=(a,b,c)=>d(a,{...c,method:"PUT",body:JSON.stringify(b)}),h=(a,b)=>d(a,{...b,method:"DELETE"});a.s(["adminApi",0,{listPrograms:a=>{let b=new URLSearchParams;a?.include_unpublished!==void 0&&b.append("include_unpublished",a.include_unpublished.toString()),a?.limit&&b.append("limit",a.limit.toString()),a?.offset&&b.append("offset",a.offset.toString());let c=b.toString();return e(`/admin/programs${c?`?${c}`:""}`)},createProgram:a=>f("/admin/programs",a),getProgram:a=>e(`/admin/programs/${a}`),updateProgram:(a,b)=>g(`/admin/programs/${a}`,b),deleteProgram:a=>h(`/admin/programs/${a}`),publishProgram:a=>f(`/admin/programs/${a}/publish`),unpublishProgram:a=>f(`/admin/programs/${a}/unpublish`),addWorkout:(a,b)=>f(`/admin/programs/${a}/workouts`,b),updateWorkout:(a,b)=>g(`/admin/workouts/${a}`,b),deleteWorkout:a=>h(`/admin/workouts/${a}`),getWorkout:a=>e(`/admin/workouts/${a}`)},"authApi",0,{signup:a=>f("/auth/signup",a),verifyOtp:a=>f("/auth/verify-otp",a),resendOtp:a=>f("/auth/resend-otp",a),signin:a=>f("/auth/signin",a),refresh:a=>f("/auth/refresh",a),logout:a=>f("/auth/logout",a),forgotPassword:a=>f("/auth/forgot-password",a),resetPassword:a=>f("/auth/reset-password",a),changePassword:a=>f("/auth/change-password",a),getMe:()=>e("/auth/me"),getStatus:()=>e("/auth/status")},"programsApi",0,{list:a=>{let b=new URLSearchParams;a?.goal&&b.append("goal",a.goal),a?.difficulty&&b.append("difficulty",a.difficulty),a?.featured&&b.append("featured","true"),a?.limit&&b.append("limit",a.limit.toString()),a?.offset&&b.append("offset",a.offset.toString());let c=b.toString();return e(`/programs${c?`?${c}`:""}`)},getFeatured:(a=6)=>e(`/programs/featured?limit=${a}`),getRecommended:(a=6)=>e(`/programs/recommended?limit=${a}`),getContinue:()=>e("/programs/continue"),getById:a=>e(`/programs/${a}`),enroll:a=>f(`/programs/${a}/enroll`),unenroll:a=>h(`/programs/${a}/enroll`),getProgress:a=>e(`/programs/${a}/progress`),getWorkoutsWithProgress:a=>e(`/programs/${a}/workouts`),markWorkoutComplete:(a,b)=>f(`/programs/workouts/${a}/complete`,b||{})},"userApi",0,{completeOnboarding:a=>f("/users/onboarding",a),getProfile:()=>e("/users/profile"),updateProfile:a=>g("/users/profile",a)}],19032)},74625,a=>{"use strict";let b,c,d;var e=a.i(72131);let f=a=>{let b,c=new Set,d=(a,d)=>{let e="function"==typeof a?a(b):a;if(!Object.is(e,b)){let a=b;b=(null!=d?d:"object"!=typeof e||null===e)?e:Object.assign({},b,e),c.forEach(c=>c(b,a))}},e=()=>b,f={setState:d,getState:e,getInitialState:()=>g,subscribe:a=>(c.add(a),()=>c.delete(a))},g=b=a(d,e,f);return f},g=a=>{let b=a?f(a):f,c=a=>(function(a,b=a=>a){let c=e.default.useSyncExternalStore(a.subscribe,e.default.useCallback(()=>b(a.getState()),[a,b]),e.default.useCallback(()=>b(a.getInitialState()),[a,b]));return e.default.useDebugValue(c),c})(b,a);return Object.assign(c,b),c},h=a=>b=>{try{let c=a(b);if(c instanceof Promise)return c;return{then:a=>h(a)(c),catch(a){return this}}}catch(a){return{then(a){return this},catch:b=>h(b)(a)}}};var i=a.i(5434),j=a.i(19032);let k=(b?g(b):g)((c=(a,b)=>({user:null,profile:null,isAuthenticated:!1,isLoading:!0,hasCompletedOnboarding:!1,setUser:b=>a({user:b,isAuthenticated:!!b}),setProfile:b=>a({profile:b,hasCompletedOnboarding:!!b?.onboarding_completed_at}),setLoading:b=>a({isLoading:b}),login:async(b,c,d=!1)=>{try{let{data:e,error:f}=await j.authApi.signin({email:b,password:c});if(f)return{success:!1,error:f.message};if(e){let b=d?30:1;i.default.set("access_token",e.access_token,{expires:b}),i.default.set("refresh_token",e.refresh_token,{expires:b});let c=await j.authApi.getStatus();if(c.data){if(a({user:c.data.user,isAuthenticated:!0,hasCompletedOnboarding:c.data.onboarding_completed}),c.data.onboarding_completed){let b=await j.userApi.getProfile();b.data&&a({profile:b.data})}return{success:!0,requiresOnboarding:!c.data.onboarding_completed}}}return{success:!1,error:"Login failed"}}catch{return{success:!1,error:"An unexpected error occurred"}}},signup:async(a,b,c)=>{try{let{data:d,error:e}=await j.authApi.signup({email:a,password:b,privacy_consent:c.privacy,data_processing_consent:c.dataProcessing,marketing_consent:c.marketing});if(e)return{success:!1,error:e.message};if(d)return{success:!0,userId:d.user_id};return{success:!1,error:"Signup failed"}}catch{return{success:!1,error:"An unexpected error occurred"}}},verifyOtp:async(b,c,d=!1)=>{try{let{data:e,error:f}=await j.authApi.verifyOtp({email:b,code:c});if(f)return{success:!1,error:f.message};if(e){let b=d?30:1;i.default.set("access_token",e.access_token,{expires:b}),i.default.set("refresh_token",e.refresh_token,{expires:b});let c=await j.authApi.getStatus();if(c.data)return a({user:c.data.user,isAuthenticated:!0,hasCompletedOnboarding:c.data.onboarding_completed}),{success:!0,requiresOnboarding:!c.data.onboarding_completed}}return{success:!1,error:"Verification failed"}}catch{return{success:!1,error:"An unexpected error occurred"}}},logout:async()=>{let b=i.default.get("refresh_token");b&&await j.authApi.logout({refresh_token:b}),i.default.remove("access_token"),i.default.remove("refresh_token"),a({user:null,profile:null,isAuthenticated:!1,hasCompletedOnboarding:!1})},refreshAuth:async()=>{let a=i.default.get("refresh_token");if(!a)return!1;try{let{data:c,error:d}=await j.authApi.refresh({refresh_token:a});if(d||!c)return b().logout(),!1;return i.default.set("access_token",c.access_token),i.default.set("refresh_token",c.refresh_token),!0}catch{return b().logout(),!1}},checkAuth:async()=>{if(a({isLoading:!0}),!i.default.get("access_token"))return void a({isLoading:!1});try{let{data:c,error:d}=await j.authApi.getStatus();if(d){if(await b().refreshAuth())return void await b().checkAuth();a({isLoading:!1});return}if(c&&(a({user:c.user,isAuthenticated:!0,hasCompletedOnboarding:c.onboarding_completed}),c.onboarding_completed)){let b=await j.userApi.getProfile();b.data&&a({profile:b.data})}}catch{b().logout()}finally{a({isLoading:!1})}}}),d={name:"sfc-auth",partialize:a=>({user:a.user,isAuthenticated:a.isAuthenticated,hasCompletedOnboarding:a.hasCompletedOnboarding})},(a,b,e)=>{let f,g={storage:function(a,b){let c;try{c=a()}catch(a){return}return{getItem:a=>{var b;let d=a=>null===a?null:JSON.parse(a,void 0),e=null!=(b=c.getItem(a))?b:null;return e instanceof Promise?e.then(d):d(e)},setItem:(a,b)=>c.setItem(a,JSON.stringify(b,void 0)),removeItem:a=>c.removeItem(a)}}(()=>localStorage),partialize:a=>a,version:0,merge:(a,b)=>({...b,...a}),...d},i=!1,j=new Set,k=new Set,l=g.storage;if(!l)return c((...b)=>{console.warn(`[zustand persist middleware] Unable to update item '${g.name}', the given storage is currently unavailable.`),a(...b)},b,e);let m=()=>{let a=g.partialize({...b()});return l.setItem(g.name,{state:a,version:g.version})},n=e.setState;e.setState=(a,b)=>(n(a,b),m());let o=c((...b)=>(a(...b),m()),b,e);e.getInitialState=()=>o;let p=()=>{var c,d;if(!l)return;i=!1,j.forEach(a=>{var c;return a(null!=(c=b())?c:o)});let e=(null==(d=g.onRehydrateStorage)?void 0:d.call(g,null!=(c=b())?c:o))||void 0;return h(l.getItem.bind(l))(g.name).then(a=>{if(a)if("number"!=typeof a.version||a.version===g.version)return[!1,a.state];else{if(g.migrate){let b=g.migrate(a.state,a.version);return b instanceof Promise?b.then(a=>[!0,a]):[!0,b]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]}).then(c=>{var d;let[e,h]=c;if(a(f=g.merge(h,null!=(d=b())?d:o),!0),e)return m()}).then(()=>{null==e||e(f,void 0),f=b(),i=!0,k.forEach(a=>a(f))}).catch(a=>{null==e||e(void 0,a)})};return e.persist={setOptions:a=>{g={...g,...a},a.storage&&(l=a.storage)},clearStorage:()=>{null==l||l.removeItem(g.name)},getOptions:()=>g,rehydrate:()=>p(),hasHydrated:()=>i,onHydrate:a=>(j.add(a),()=>{j.delete(a)}),onFinishHydration:a=>(k.add(a),()=>{k.delete(a)})},g.skipHydration||p(),f||o}));a.s(["useAuthStore",0,k],74625)}];

//# sourceMappingURL=src_39e5f552._.js.map